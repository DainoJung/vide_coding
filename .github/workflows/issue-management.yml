name: ì´ìŠˆ ìë™ ê´€ë¦¬

on:
  issues:
    types: [opened, labeled, assigned]

jobs:
  issue-welcome:
    if: github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
    - name: ì´ìŠˆ í™˜ì˜ ëŒ“ê¸€
      uses: actions/github-script@v7
      with:
        script: |
          const issue = context.payload.issue;
          const welcomeMessage = `ğŸ‘‹ **VideCoding** í”„ë¡œì íŠ¸ì— ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!

          ## ğŸ“‹ ì´ìŠˆ ì²˜ë¦¬ ê³¼ì •
          1. **ìë™ ë¶„ë¥˜**: ì´ìŠˆ ìœ í˜•ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë¼ë²¨ì´ ë¶€ì—¬ë©ë‹ˆë‹¤
          2. **ë‹´ë‹¹ì í• ë‹¹**: ì ì ˆí•œ ë‹´ë‹¹ìê°€ ìë™ìœ¼ë¡œ í• ë‹¹ë©ë‹ˆë‹¤
          3. **ìš°ì„ ìˆœìœ„ ì„¤ì •**: ì´ìŠˆì˜ ì¤‘ìš”ë„ì— ë”°ë¼ ìš°ì„ ìˆœìœ„ê°€ ê²°ì •ë©ë‹ˆë‹¤
          4. **ì§„í–‰ ìƒí™© ì¶”ì **: ì´ìŠˆ ì²˜ë¦¬ ê³¼ì •ì„ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤

          ## ğŸ” ë‹¤ìŒ ë‹¨ê³„
          - ê´€ë¦¬ìê°€ ì´ìŠˆë¥¼ ê²€í† í•˜ê³  ì ì ˆí•œ ë¼ë²¨ì„ ì¶”ê°€í•  ì˜ˆì •ì…ë‹ˆë‹¤
          - ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš° ëŒ“ê¸€ë¡œ ìš”ì²­ë“œë¦¬ê² ìŠµë‹ˆë‹¤
          - ì§„í–‰ ìƒí™©ì€ ì´ ì´ìŠˆì—ì„œ ê³„ì† ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤

          ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”! ğŸš€`;

          await github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: welcomeMessage
          });

  issue-labeler:
    if: github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
    - name: ì´ìŠˆ ìë™ ë¼ë²¨ë§
      uses: actions/github-script@v7
      with:
        script: |
          const issue = context.payload.issue;
          const title = issue.title.toLowerCase();
          const body = issue.body ? issue.body.toLowerCase() : '';
          const labels = [];

          // ì´ìŠˆ ìœ í˜• ê¸°ë°˜ ë¼ë²¨ë§
          if (title.includes('bug') || body.includes('bug') || 
              title.includes('error') || body.includes('error') ||
              title.includes('ë¬¸ì œ') || body.includes('ë¬¸ì œ')) {
            labels.push('bug');
          }

          if (title.includes('feature') || body.includes('feature') ||
              title.includes('ê¸°ëŠ¥') || body.includes('ê¸°ëŠ¥')) {
            labels.push('enhancement', 'feature');
          }

          if (title.includes('docs') || title.includes('documentation') ||
              title.includes('ë¬¸ì„œ') || body.includes('ë¬¸ì„œ')) {
            labels.push('documentation');
          }

          if (title.includes('help') || title.includes('question') ||
              title.includes('ë„ì›€') || title.includes('ì§ˆë¬¸')) {
            labels.push('question', 'help wanted');
          }

          // ìš°ì„ ìˆœìœ„ ë¼ë²¨ë§
          if (title.includes('urgent') || title.includes('critical') ||
              title.includes('ê¸´ê¸‰') || body.includes('ê¸´ê¸‰')) {
            labels.push('priority: critical');
          } else if (title.includes('important') || title.includes('ì¤‘ìš”')) {
            labels.push('priority: high');
          } else {
            labels.push('priority: medium');
          }

          // ìƒíƒœ ë¼ë²¨
          labels.push('status: todo');

          // ì´ˆë³´ììš© ì´ìŠˆ íŒë³„
          if (title.includes('good first issue') || title.includes('ì´ˆë³´ì') ||
              body.includes('good first issue') || body.includes('ì´ˆë³´ì')) {
            labels.push('good first issue');
          }

          // ë¼ë²¨ ì ìš©
          if (labels.length > 0) {
            await github.rest.issues.addLabels({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              labels: labels
            });
          }

  issue-assigner:
    if: github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
    - name: ì´ìŠˆ ìë™ í• ë‹¹
      uses: actions/github-script@v7
      with:
        script: |
          const issue = context.payload.issue;
          const title = issue.title.toLowerCase();
          const body = issue.body ? issue.body.toLowerCase() : '';
          
          // ê¸°ë³¸ ë‹´ë‹¹ì ëª©ë¡
          const maintainers = ['DainoJung']; // ì‹¤ì œ GitHub ì‚¬ìš©ìëª…ìœ¼ë¡œ ë³€ê²½
          
          // ì´ìŠˆ ìœ í˜•ì— ë”°ë¥¸ ì „ë¬¸ ë‹´ë‹¹ì í• ë‹¹ (í–¥í›„ í™•ì¥ ê°€ëŠ¥)
          let assignee = maintainers[0]; // ê¸°ë³¸ ë‹´ë‹¹ì
          
          // ë²„ê·¸ ë¦¬í¬íŠ¸ì¸ ê²½ìš°
          if (title.includes('bug') || body.includes('bug')) {
            // ë²„ê·¸ ì „ë¬¸ ë‹´ë‹¹ìê°€ ìˆë‹¤ë©´ í• ë‹¹
            assignee = maintainers[0];
          }
          
          // ê¸°ëŠ¥ ìš”ì²­ì¸ ê²½ìš°
          if (title.includes('feature') || body.includes('feature')) {
            // ê¸°ëŠ¥ ê°œë°œ ë‹´ë‹¹ìê°€ ìˆë‹¤ë©´ í• ë‹¹
            assignee = maintainers[0];
          }
          
          // ë‹´ë‹¹ì í• ë‹¹
          await github.rest.issues.addAssignees({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number,
            assignees: [assignee]
          });

  issue-status-update:
    if: github.event.action == 'labeled'
    runs-on: ubuntu-latest
    steps:
    - name: ë¼ë²¨ ë³€ê²½ì— ë”°ë¥¸ ìƒíƒœ ëŒ“ê¸€
      uses: actions/github-script@v7
      with:
        script: |
          const label = context.payload.label;
          let statusMessage = '';

          switch(label.name) {
            case 'status: in-progress':
              statusMessage = 'ğŸ”„ **ìƒíƒœ ì—…ë°ì´íŠ¸**: ì´ìŠˆ ì²˜ë¦¬ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!';
              break;
            case 'status: review':
              statusMessage = 'ğŸ‘€ **ìƒíƒœ ì—…ë°ì´íŠ¸**: ë¦¬ë·° ë‹¨ê³„ì— ë“¤ì–´ê°”ìŠµë‹ˆë‹¤.';
              break;
            case 'status: done':
              statusMessage = 'âœ… **ìƒíƒœ ì—…ë°ì´íŠ¸**: ì´ìŠˆê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! í™•ì¸ í›„ ì´ìŠˆë¥¼ ë‹«ì•„ì£¼ì„¸ìš”.';
              break;
            case 'priority: critical':
              statusMessage = 'ğŸš¨ **ìš°ì„ ìˆœìœ„**: ì´ ì´ìŠˆëŠ” ê¸´ê¸‰í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.';
              break;
            case 'help wanted':
              statusMessage = 'ğŸ™‹â€â™‚ï¸ **ë„ì›€ ìš”ì²­**: ì»¤ë®¤ë‹ˆí‹°ì˜ ë„ì›€ì´ í•„ìš”í•œ ì´ìŠˆì…ë‹ˆë‹¤.';
              break;
            case 'good first issue':
              statusMessage = 'ğŸŒ± **ì²« ê¸°ì—¬**: ì´ ì´ìŠˆëŠ” ì²« ê¸°ì—¬ìì—ê²Œ ì í•©í•©ë‹ˆë‹¤!';
              break;
          }

          if (statusMessage) {
            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: statusMessage
            });
          } 